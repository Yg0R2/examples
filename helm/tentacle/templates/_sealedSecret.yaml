{{- define "tentacle.sealedSecret" }}
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
{{ include "tentacle.sealedSecret.metadata" . }}
spec:
  encryptedData:
    {{- range $key, $value := .Values.sealedSecrets.data }}
      {{- $key | nindent 4 }}: {{ $value | quote }}
    {{- end -}}
{{- end -}}

{{- define "tentacle.sealedSecret.metadata" }}
{{- $scope := .Values.sealedSecrets.scope | default "strict" -}}

{{- include "tentacle.metadata" . }}
  annotations:
    sealedsecrets.bitnami.com/scope: {{ $scope | quote }}
    {{- if not (eq $scope "strict") }}
    sealedsecrets.bitnami.com/{{ $scope }}: "true"
    {{- end -}}
{{- end -}}
